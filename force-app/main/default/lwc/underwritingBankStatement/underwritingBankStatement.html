<template>
    <div class="slds-p-around_medium">
    <div class="alignright">
        <lightning-button-icon icon-name="utility:filterList"  alternative-text="Filter" title="Filter" onclick={showFilter}></lightning-button-icon>
    </div>
    <template if:true={filter}> 
        <div class="slds-box slds-theme_default">
            <div class="slds-path">
                <div class="slds-grid slds-path__action">
                    <div class="slds-float_left">        
                        <lightning-input type="search" onblur={handleKeyChange} class="slds-m-bottom_small" label="Transaction Name:" maxlength="70">  
                        </lightning-input>
                    </div>
                    <div>
                        Grouping:
                    <br>
                    <template for:each={grouping} for:item="item">
                        <lightning-input key={item} type="checkbox" class="slds-m-bottom_small" label={item} maxlength="70" onchange={handleGroupingSelection}>  
                        </lightning-input>
                    </template>
                    
                    </div>
                    <div>
                        Category:
                        <br>
                    <template for:each={categoryList} for:item="item">
                        <lightning-input key={item} type="checkbox" class="slds-m-bottom_small" label={item} maxlength="70" onchange={handleSelection}>  
                        </lightning-input>
                    </template>
                    </div>
                    
                    <div>
                        Sub Category:
                        <br>
                    <template for:each={subcategorylist} for:item="item">
                        <lightning-input key={item} type="checkbox" class="slds-m-bottom_small" label={item} maxlength="70" onchange={handleSubCatSelection}>  
                        </lightning-input>
                    
                </template>
                    </div>
                    <div>
                        <lightning-input type="date" name="input1" label="Transaction Start Date" onchange={handleStDateCahngeEvent}></lightning-input>
                    </div>
                    <div>
                        <lightning-input type="date" name="input1" label="Transaction End Date" onchange={handleEndDateCahngeEvent}></lightning-input>
                    </div>  
                </div>
            </div>
        </div>
        <br>
        <div class="alignright">
            <lightning-button label="Apply" variant="brand" class="slds-m-right_medium" onclick={applyFilter}>
            </lightning-button>
        </div>
</template>
    <br>
    <div class="container">
        <lightning-tabset class="slds-p-vertical_large">
            <template for:each={statements} for:item='stmt'>
            <lightning-tab data-name={stmt.Id} key={stmt.Id} label={stmt.Name} onactive={handleActive}>
                <lightning-layout-item>
                    <div style="width: 100%; background-color:#fff">
                        <div class="slds-scrollable_x slds-grid slds-grid_vertical-align-start" style="width: 100%;">
    <div class="slds-box slds-themeâ€“default">
        <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_striped">
                <thead>
                <tr>
                    <th class="" scope="col">
                        Transaction Date
                    </th>
                    <th class="" scope="col">
                        Grouping
                    </th>
                    <th class="" scope="col">
                        Category
                    </th>
                    <th class="" scope="col">
                        Sub Category
                    </th>
                    <th class="" scope="col">
                        Transaction Name
                    </th>
                    <th class="" scope="col" style="text-align: right">
                        Amount
                    </th>
                    <th class="" scope="col" style="text-align: center">
                        Include in Business Debit/Deposit
                    </th>
                </tr>
            </thead>
            <tbody>
                    <template for:each={datalist} for:item="item">
                        <tr key={item}>
                            <th scope="col">
                                {item.key}
                            </th>
                            <th scope="col">
                                {item.grp}
                            </th>
                            <th scope="col">
                                {item.type}
                            </th>
                            <th scope="col">
                               
                            </th>
                            <th scope="col">
                               
                            </th>
                            <th scope="col">
                               
                            </th>
                            <th scope="col">
                               
                            </th>
                        </tr>
                
                        <template for:each={item.value} for:item="child">
                            <tr key={item}>
                                <th scope="col">
                                    
                                </th>
                                <th scope="col">
                                    
                                </th>
                                <th scope="col">
                                    
                                </th>
                                <th scope="col">
                                    {child.Sub_Category__c}
                                </th>
                                <th scope="col" style="text-align: left">
                                    {child.Transaction_Name__c}
                                </th>
                                <th scope="col" style="text-align: right">
                                    <lightning-formatted-number value={child.Input_Amount__c} format-style="currency" currency-code="USD"></lightning-formatted-number>
                                </th>
                                <th scope="col" style="text-align: center">
                                    <input type="checkbox" checked={child.Include_in_Business_Debits_Deposits__c} data-name={child.Id} onchange={handleRowAction} />
                                </th>
                            </tr>
                        </template>
                    </template>
            </tbody>
        </table>
    </div>
    </div>
    </div>
    </lightning-layout-item>
    </lightning-tab>
    </template>
    </lightning-tabset>
    </div>
    <br>
    <div class="alignright">
        <lightning-button label="Save" variant="brand" class="slds-m-right_medium" onclick={updateStatements}>
        </lightning-button>
    </div>
    </div>
</template>