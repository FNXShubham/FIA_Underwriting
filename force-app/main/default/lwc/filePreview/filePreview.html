<template>
    <lightning-card> <!--variant="Narrow"  title={title} icon-name="standard:document"-->
        <template if:true={isLoading}>
            <lightning-spinner alternative-text="Loading" size="small" variant="brand"></lightning-spinner>
        </template>
        <lightning-button if:true={showsync} variant="brand" title="Content Sync" icon-name="utility:sync"
            onclick={handleSync} slot="actions" >
        </lightning-button>
        <div class="slds-var-p-around_small" >
            <div class="slds-grid slds-wrap">
                <div class="slds-col slds-size_1-of-4" if:true={showFilters}>
                    <lightning-input if:true={showFilters} type="search" variant="standard" name="Title" label="Title" onchange={handleSearch} >
                    </lightning-input>
                </div>
                <div class="slds-col slds-size_1-of-4" if:true={showFilters}>
                    <lightning-input  if:true={showFilters} type="search" variant="standard" name="Created By" label="Created By" onchange={handleSearch}>\
                    </lightning-input>
                </div>
                <!-- <div class="slds-col slds-size_2-of-4 slds-var-p-left_small">
                    <lightning-file-upload  if:true={showFileUpload}
                        label="Upload New File"
                        name="fileUploader"
                        accept={accept}
                        record-id={recordId}
                        onuploadfinished={handleUploadFinished}
                        multiple>
                    </lightning-file-upload>
                </div> -->
            </div>
        </div>
        
        <div class="slds-var-p-around_small">
            <lightning-datatable
                key-field="id"
                data={dataList}
                columns={columnsList}
                hide-checkbox-column="true"
                onrowaction={handleRowAction}>
            </lightning-datatable>
        </div>
    </lightning-card>
    <div>
        <template if:true={showframe}>
        <div class="slds-p-around_medium lgc-bg">
            <lightning-button label="Open in New Tab" variant="brand" onclick={openFile}></lightning-button>
            </div>
        
        <iframe src= {fileurl} width="100%" height="400px" scrolling="auto">

        </iframe>
    </template>
    </div>
    <template if:true={showpopup}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeCommentPopUp}>
                        <lightning-icon icon-name="utility:close"
                                        alternative-text="close"
                                        variant="inverse"
                                        size="small" ></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                    </button>
                </header>
                <lightning-card title="Add Rejection Comment" icon-name="action:quote">
                    <div class="slds-var-p-around_x-small" >
                        <lightning-record-edit-form object-api-name="Application_Underwriting__c" id="createStipDefForm" >
                            <lightning-input-field field-name="Comments__c" label="Comments" onchange={handleStipComment}> </lightning-input-field>
                        </lightning-record-edit-form>
                        <!--<lightning-record-form  object-api-name="Stipulations_Definition__c" layout-type="Full" columns="2" mode="edit" onsubmit={closeDetails}>
                        </lightning-record-form>-->
                        <br/>
                        <lightning-button label="Reject" onclick={rejectFile} variant="brand"></lightning-button> <!--onclick={createStipDefRec}-->
                    </div>
                </lightning-card>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>